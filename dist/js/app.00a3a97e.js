(function(){"use strict";var e={300:function(e,t,s){var a=s(547),r=s(149),o=s(949);const c={id:"app"},n={class:"navbar bg-body-tertiary",style:{"background-color":"rgb(10, 53, 97)"}},i={class:"container-fluid tops"},l=(0,r.Lk)("a",{class:"navbar-brand"},[(0,r.Lk)("h2",{style:{color:"#83bee6","font-family":"Knight Brush Demo"}},"EduVenture")],-1),d={class:"d-inline-flex mt-2 mt-md-0 ms-md-auto"},u=["disabled"],h=(0,r.Lk)("i",{class:"bi bi-cart"},null,-1),p={key:0,class:"badge badge-pill badge-danger",style:{color:"#000"}},m={class:"row"},k={class:"col-3 p-4"},b=(0,r.Lk)("label",{for:"search"},"Search",-1),v=(0,r.Lk)("br",null,null,-1),f=(0,r.Lk)("br",null,null,-1),g=(0,r.Lk)("br",null,null,-1),C={class:"dropdown"},y={class:"btn btn-outline-dark dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},L={class:"dropdown-menu"},S=(0,r.Lk)("br",null,null,-1),w={class:"dropdown"},T=(0,r.Lk)("button",{class:"btn btn-outline-dark dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Descending ",-1),O={class:"dropdown-menu"};function F(e,t,s,F,I,A){const x=(0,r.g2)("lesson-component"),E=(0,r.g2)("checkout-component");return(0,r.uX)(),(0,r.CE)("div",c,[(0,r.Lk)("nav",n,[(0,r.Lk)("div",i,[l,(0,r.Lk)("div",d,[(0,r.Lk)("button",{class:"rounded h-8 w-8 flex items-center justify-center bg-[#f5f5f5]",onClick:t[0]||(t[0]=(...e)=>A.toggleCart&&A.toggleCart(...e)),disabled:I.cart.length<1},[h,A.totalCartItems>0?((0,r.uX)(),(0,r.CE)("span",p,(0,o.v_)(A.totalCartItems),1)):(0,r.Q3)("",!0)],8,u)])])]),(0,r.Lk)("div",m,[(0,r.Lk)("div",k,[b,v,(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>I.searchQuery=e),id:"search",type:"text",placeholder:"Search by title or location",width:"100%",height:"20px"},null,512),[[a.Jo,I.searchQuery]]),f,(0,r.eW)(),g,(0,r.Lk)("div",C,[(0,r.Lk)("button",y,(0,o.v_)(I.selectedSort),1),(0,r.Lk)("ul",L,[(0,r.Lk)("li",null,[(0,r.Lk)("a",{class:"dropdown-item",onClick:t[2]||(t[2]=e=>A.sortBy("title"))},"Title")]),(0,r.Lk)("li",null,[(0,r.Lk)("a",{class:"dropdown-item",onClick:t[3]||(t[3]=e=>A.sortBy("location"))},"Location")]),(0,r.Lk)("li",null,[(0,r.Lk)("a",{class:"dropdown-item",onClick:t[4]||(t[4]=e=>A.sortBy("price"))},"Price")]),(0,r.Lk)("li",null,[(0,r.Lk)("a",{class:"dropdown-item",onClick:t[5]||(t[5]=e=>A.sortBy("availableSpaces"))},"Available Spaces")])])]),S,(0,r.Lk)("div",w,[T,(0,r.Lk)("ul",O,[(0,r.Lk)("li",null,[(0,r.Lk)("a",{class:"dropdown-item",onClick:t[6]||(t[6]=e=>A.setOrder("asc"))},"Ascending")]),(0,r.Lk)("li",null,[(0,r.Lk)("a",{class:"dropdown-item",onClick:t[7]||(t[7]=e=>A.setOrder("desc"))},"Descending")])])])]),I.showCart?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(x,{key:0,classes:I.classes,onAddClassToCart:A.handleAddToCart},null,8,["classes","onAddClassToCart"]))]),I.showCart?((0,r.uX)(),(0,r.Wv)(E,{key:0,onBackToLessons:e.handleBackToLessons,onViewLessons:t[8]||(t[8]=e=>I.showCart=!1),cartItems:I.cart,onReduceSpace:A.handleReduceSpace,onOrderSubmitted:A.resetCart},null,8,["onBackToLessons","cartItems","onReduceSpace","onOrderSubmitted"])):(0,r.Q3)("",!0)])}const I=e=>((0,r.Qi)("data-v-593e693e"),e=e(),(0,r.jt)(),e),A={class:"row"},x=["src"],E={class:"card-body"},_={class:"card-title"},P={class:"card-text"},$=I((()=>(0,r.Lk)("strong",null,"Location:",-1))),j={class:"card-text"},V=I((()=>(0,r.Lk)("strong",null,"Spaces:",-1))),B=I((()=>(0,r.Lk)("strong",null,"Price:",-1))),X=["onClick","disabled"];function Q(e,t,s,a,c,n){return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",A,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredItems,(e=>((0,r.uX)(),(0,r.CE)("div",{id:"searchResults",key:e.title,class:"card first col-lg-3 col-5 p-2",style:{"background-color":"#9aa4ab"}},[(0,r.Lk)("img",{src:e.image,alt:"Activity Image",class:"card-img-top"},null,8,x),(0,r.Lk)("div",E,[(0,r.Lk)("h5",_,"Title: "+(0,o.v_)(e.title),1),(0,r.Lk)("p",P,[$,(0,r.eW)(" "+(0,o.v_)(e.location),1)]),(0,r.Lk)("p",j,[V,(0,r.eW)(" "+(0,o.v_)(e.availableSpaces),1)]),(0,r.Lk)("p",null,[B,(0,r.eW)(" £"+(0,o.v_)(e.price),1)]),(0,r.Lk)("button",{class:"btn btn-sm text-light",style:{"background-color":"#3498db"},onClick:t=>n.addToCart(e),disabled:e.isSoldOut||e.addedToCart&&e.purchasedSpaces===e.totalSpaces}," Add to Cart ",8,X)])])))),128))])])}var W={name:"LessonComponent",props:["classes"],computed:{filteredItems(){return this.classes},totalCartItems(){return this.cart.reduce(((e,t)=>e+t.purchasedSpaces),0)},totalCheckoutValue(){return this.cart.reduce(((e,t)=>e+t.price*t.purchasedSpaces),0)},isCheckoutFormValid(){return this.checkoutForm.name.length>0&&this.checkoutForm.phone.match(/^\d{10}$/)}},methods:{addToCart(e){this.$emit("add-class-to-cart",e)}}},N=s(890);const J=(0,N.A)(W,[["render",Q],["__scopeId","data-v-593e693e"]]);var R=J;const z=e=>((0,r.Qi)("data-v-627a8765"),e=e(),(0,r.jt)(),e),D={class:""},H=z((()=>(0,r.Lk)("h3",{class:"text-center"},"Cart",-1))),U={key:0,class:"text-center mt-3"},q={key:1,class:"p-3 row"},K={class:"col-lg-9 col-sm-12"},G=["src"],M={class:"card-title"},Y={class:"card-text"},Z={class:"card-text"},ee={class:"card-text"},te=["onClick"],se={class:"col-lg-3 col-12"},ae=z((()=>(0,r.Lk)("h4",null,"Checkout",-1))),re={class:"mb-3"},oe=z((()=>(0,r.Lk)("label",{for:"name",class:"form-label"},"Name",-1))),ce={class:"mb-3"},ne=z((()=>(0,r.Lk)("label",{for:"phone",class:"form-label"},"Phone Number",-1))),ie=z((()=>(0,r.Lk)("small",{class:"text-muted"},"Please enter a valid 10-digit phone number.",-1))),le=["disabled"];function de(e,t,s,c,n,i){return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",D,[H,0===s.cartItems.length?((0,r.uX)(),(0,r.CE)("div",U,[(0,r.Lk)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>i.goToActivities&&i.goToActivities(...e))},"Go Back to Activities")])):((0,r.uX)(),(0,r.CE)("div",q,[(0,r.Lk)("div",K,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.cartItems,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.title,class:"card-body first col-lg-4 col-5 p-3",style:{display:"inline-block"}},[(0,r.Lk)("img",{src:e.image,alt:"Activity Image",class:"card-img-top"},null,8,G),(0,r.Lk)("h5",M,"Title: "+(0,o.v_)(e.title),1),(0,r.Lk)("p",Y,"Location: "+(0,o.v_)(e.location),1),(0,r.Lk)("p",Z,"Spaces: "+(0,o.v_)(e.purchasedSpaces)+" / "+(0,o.v_)(e.totalSpaces),1),(0,r.Lk)("p",ee,"Price: £"+(0,o.v_)(e.price*e.purchasedSpaces),1),(0,r.Lk)("button",{class:"btn btn-sm btn-danger",onClick:t=>i.removeFromCart(e)},"Remove from Cart",8,te)])))),128))]),(0,r.Lk)("div",se,[(0,r.Lk)("div",null,[ae,(0,r.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>i.submitOrder&&i.submitOrder(...e)),["prevent"]))},[(0,r.Lk)("div",re,[oe,(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>n.checkoutForm.name=e),required:""},null,512),[[a.Jo,n.checkoutForm.name]])]),(0,r.Lk)("div",ce,[ne,(0,r.bo)((0,r.Lk)("input",{type:"tel",class:"form-control",id:"phone","onUpdate:modelValue":t[2]||(t[2]=e=>n.checkoutForm.phone=e),pattern:"[0-9]{10}",required:""},null,512),[[a.Jo,n.checkoutForm.phone]]),ie]),(0,r.Lk)("h4",null,"Total: £"+(0,o.v_)(i.totalCheckoutValue),1),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:!i.isCheckoutFormValid,onClick:t[3]||(t[3]=(...t)=>e.checkoutAlert&&e.checkoutAlert(...t))}," Checkout ",8,le)],32)])])]))])])}var ue={name:"CheckoutComponent",props:["cartItems"],data(){return{checkoutForm:{name:"",phone:""}}},computed:{totalCartItems(){return this.cartItems.reduce(((e,t)=>e+t.purchasedSpaces),0)},totalCheckoutValue(){return this.cartItems.reduce(((e,t)=>e+t.price*t.purchasedSpaces),0)},isCheckoutFormValid(){return this.checkoutForm.name.length>0&&this.checkoutForm.phone.match(/^\d{10}$/)}},methods:{async submitOrder(){try{const e={name:this.checkoutForm.name,phone:this.checkoutForm.phone,items:this.cartItems.map((e=>({id:e._id,purchasedSpaces:e.purchasedSpaces})))},t=await fetch("https://testapp-env.eba-9yiukzwh.eu-north-1.elasticbeanstalk.com/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTPs error! status: ${t.status}`);this.$emit("order-submitted"),this.checkoutForm.name="",this.checkoutForm.phone="",alert("Order submitted successfully!")}catch(e){console.error("Error submitting order:",e)}},goToActivities(){this.$emit("viewLessons")},removeFromCart(e){this.$emit("reduce-space",e)}}};const he=(0,N.A)(ue,[["render",de],["__scopeId","data-v-627a8765"]]);var pe=he,me={name:"App",components:{LessonComponent:R,CheckoutComponent:pe},data(){return{searchQuery:"",viewActivities:!0,classes:[],cart:[],checkoutForm:{name:"",phone:""},selectedSort:"Sort By",showCart:!1}},created(){this.fetchClasses()},computed:{filteredItems(){return this.classes},totalCartItems(){return this.cart.reduce(((e,t)=>e+t.purchasedSpaces),0)},totalCheckoutValue(){return this.cart.reduce(((e,t)=>e+t.price*t.purchasedSpaces),0)},isCheckoutFormValid(){return this.checkoutForm.name.length>0&&this.checkoutForm.phone.match(/^\d{10}$/)}},watch:{searchQuery(e){this.performSearch()}},methods:{async fetchClasses(){try{const e=await fetch("https://testapp-env.eba-9yiukzwh.eu-north-1.elasticbeanstalk.com/classes");if(!e.ok)throw new Error(`HTTPs error! status: ${e.status}`);this.classes=await e.json()}catch(e){console.error("Error fetching classes:",e)}},toggleCart(){this.showCart=!this.showCart},handleReduceSpace(e){const t=this.cart.findIndex((t=>t.title===e.title));-1!==t&&(this.cart[t].purchasedSpaces>1?this.cart[t].purchasedSpaces-=1:this.cart.splice(t,1));const s=this.classes.findIndex((t=>t.title===e.title));-1!==s&&this.classes[s].availableSpaces<5&&(this.classes[s].availableSpaces+=1)},resetCart(){this.cart=[]},sortBy(e){this.sortCriterion=e,this.filteredItems.sort(((t,s)=>"title"===e||"location"===e?t[e].localeCompare(s[e]):t[e]-s[e])),this.selectedSort=this.getSortLabel(e)},getSortLabel(e){const t={title:"Title",location:"Location",price:"Price",availableSpaces:"Available Spaces"};return t[e]||"Sort By"},toggleSortOrder(){this.sortOrder*=-1},checkoutAlert(){alert(`Checkout successful! Total amount: £${this.totalCheckoutValue}`)},handleAddToCart(e){const t=this.cart.find((t=>t.title===e.title));t?t.purchasedSpaces<5?t.purchasedSpaces+=1:alert("You've reached the maximum number of spaces for this class."):this.cart.push({...e,purchasedSpaces:1});const s=this.classes.findIndex((t=>t.title===e.title));-1!==s&&this.classes[s].availableSpaces>0&&(this.classes[s].availableSpaces-=1)},addToCart(e){this.$emit("add-item",e);const t=this.cart.find((t=>t.title===e.title));t?t.purchasedSpaces<t.totalSpaces&&t.purchasedSpaces++:this.cart.push({...e,addedToCart:!0,purchasedSpaces:1}),e.availableSpaces--,0===e.availableSpaces&&(e.isSoldOut=!0)},removeFromCart(e){const t=this.cart.findIndex((t=>t.title===e.title));if(-1!==t&&this.cart[t].purchasedSpaces>0){const s=1;e.availableSpaces+=s;const a=this.classes.findIndex((t=>t.title===e.title));-1!==a&&(this.classes[a].availableSpaces+=s,this.classes[a].isSoldOut=!1),this.cart[t].purchasedSpaces-=s,0===this.cart[t].purchasedSpaces&&(this.cart.splice(t,1),e.addedToCart=!1)}},setOrder(e){this.sortOrder=e},async submitOrder(){try{const e={name:this.checkoutForm.name,phone:this.checkoutForm.phone,items:this.cart.map((e=>({id:e._id,purchasedSpaces:e.purchasedSpaces})))},t=await fetch("https://testapp-env.eba-9yiukzwh.eu-north-1.elasticbeanstalk.com/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTPs error! status: ${t.status}`);for(const s of this.cart)await this.updateClassSpace(s._id,s.availableSpaces-s.purchasedSpaces);this.checkoutForm.name="",this.checkoutForm.phone="",this.cart=[],alert("Order submitted successfully!")}catch(e){console.error("Error submitting order:",e)}},async changePage(){this.viewActivities=!this.viewActivities},async updateClassSpace(e,t){try{const s={availableSpaces:t},a=await fetch(`https://testapp-env.eba-9yiukzwh.eu-north-1.elasticbeanstalk.com/classes/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw new Error(`HTTPs error! status: ${a.status}`);const r=await a.json();this.updateLocalClassData(r),alert("Class updated successfully!")}catch(s){console.error("Error updating class space:",s)}},updateLocalClassData(e){const t=this.classes.findIndex((t=>t._id===e._id));-1!==t&&this.classes.splice(t,1,e)},async performSearch(){try{const e=await fetch(`https://testapp-env.eba-9yiukzwh.eu-north-1.elasticbeanstalk.com/search?q=${encodeURIComponent(this.searchQuery)}`);if(!e.ok)throw new Error(`HTTPs error! status: ${e.status}`);this.classes=await e.json()}catch(e){console.error("Error performing search:",e)}},async updateClassSpace(e,t){try{const s=await fetch(`https://testapp-env.eba-9yiukzwh.eu-north-1.elasticbeanstalk.com/classes/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({purchasedSpaces:t})});if(!s.ok)throw new Error(`HTTPs error! status: ${s.status}`);this.fetchClasses()}catch(s){console.error("Error updating class space:",s)}}}};const ke=(0,N.A)(me,[["render",F]]);var be=ke,ve=s(663);(0,ve.k)("/Vue-Mobile-App/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),(0,a.Ef)(be).mount("#app"),"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/service-worker.js").then((function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)}),(function(e){console.log("ServiceWorker registration failed: ",e)}))}))}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,a,r,o){if(!a){var c=1/0;for(d=0;d<e.length;d++){a=e[d][0],r=e[d][1],o=e[d][2];for(var n=!0,i=0;i<a.length;i++)(!1&o||c>=o)&&Object.keys(s.O).every((function(e){return s.O[e](a[i])}))?a.splice(i--,1):(n=!1,o<c&&(c=o));if(n){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,r,o]}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,o,c=a[0],n=a[1],i=a[2],l=0;if(c.some((function(t){return 0!==e[t]}))){for(r in n)s.o(n,r)&&(s.m[r]=n[r]);if(i)var d=i(s)}for(t&&t(a);l<c.length;l++)o=c[l],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},a=self["webpackChunkeduventure"]=self["webpackChunkeduventure"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(300)}));a=s.O(a)})();
//# sourceMappingURL=app.00a3a97e.js.map